﻿@{
    var userId = TempData["userId"]?.ToString();
    var isLoggedIn = Context.Request.Cookies["JwtToken"] != null;
}
<div class="header-top bg-primary text-uppercase">
    <div class="container">
        <div class="header-left">
            <div class="mr-auto mr-sm-3 mr-md-0">
                <a href="#" class="pl-0"><i class="flag-vn flag"></i>VND</a>
                <!-- End .header-menu -->
            </div>
            <!-- End .header-dropown -->
        </div>
        <!-- End .header-left -->

        <div class="header-right header-dropdowns ml-0 ml-sm-auto">
            <p class="top-message mb-0 d-none d-sm-block">Minh Nguyen Technology</p>
            <div class="header-dropdown dropdown-expanded mr-3">
                <a href="#">Links</a>
                <div class="header-menu">
                    <ul>
                        <li><a href="#">Tài Khoản</a></li>
                        <li><a href="#">Liên Hệ</a></li>
                        <li><a href="#">DS Yêu Thích</a></li>
                        <li><a href="@Url.Action("Index", "Cart")">Giỏ Hàng</a></li>
                        @if (isLoggedIn)
                        {
                            <li><a href="@Url.Action("Logout", "Auth")">Đăng Xuất</a></li>
                        }
                        else
                        {
                            <li><a href="@Url.Action("Login", "Auth")">Đăng Nhập</a></li>
                        }
                    </ul>
                    @if (isLoggedIn && !string.IsNullOrEmpty(userId))
                    {
                        <script>
                            sessionStorage.setItem("sessionId", "@userId");
                        </script>
                    }
                    else if (!isLoggedIn)
                    {
                        <script>
                            sessionStorage.clear();
                        </script>
                    }
                </div>
                <!-- End .header-menu -->
            </div>
            <!-- End .header-dropown -->

            <span class="separator"></span>

            <div class="social-icons">
                <a href="#" class="social-icon social-facebook icon-facebook ml-0" target="_blank"></a>
                <a href="#" class="social-icon social-twitter icon-twitter ml-0" target="_blank"></a>
                <a href="#" class="social-icon social-instagram icon-instagram ml-0" target="_blank"></a>
            </div>
            <!-- End .social-icons -->
        </div>
        <!-- End .header-right -->
    </div>
    <!-- End .container -->
</div>
<!-- End .header-top -->

<div class="header-middle text-dark sticky-header">
    <div class="container">
        <div class="header-left col-lg-2 w-auto pl-0">
            <button class="mobile-menu-toggler mr-2" type="button">
                <i class="fas fa-bars"></i>
            </button>
            <a href="@Url.Action("Index", "Home")" class="logo">
                <img src="~/assets/images/logo.png" width="111" height="44" alt="Minh Nguyen Logo">
            </a>
        </div>
        <!-- End .header-left -->

        <div class="header-right w-lg-max pl-2">
            <div class="header-search header-icon header-search-inline header-search-category w-lg-max">
                <a href="#" class="search-toggle" role="button"><i class="icon-search-3"></i></a>
                <form action="/User/Product/Index" method="get">
                    <div class="header-search-wrapper">
                        <input type="search" class="form-control" name="search" id="search" placeholder="Tìm kiếm..." required>
                        <button class="btn icon-magnifier" type="submit"></button>
                    </div>
                    <!-- End .header-search-wrapper -->
                </form>
            </div>
            <!-- End .header-search -->

            <div class="header-contact d-none d-lg-flex align-items-center pr-xl-5 mr-5 mr-xl-3 ml-5">
                <i class="icon-phone-2"></i>
                <h6 class="pt-1 line-height-1">Hotline!!!<a href="tel:#" class="d-block text-dark ls-10 pt-1">+0914 999 999</a></h6>
            </div>
            <!-- End .header-contact -->

            <a href="#" class="header-icon header-icon-user"><i class="icon-user-2"></i></a>

            <a href="#" class="header-icon"><i class="icon-wishlist-2"></i></a>

            <div class="dropdown cart-dropdown">
                <a href="#" title="Cart" class="dropdown-toggle dropdown-arrow cart-toggle" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" data-display="static">
                    <i class="minicart-icon"></i>
                    <span class="cart-count badge-circle"></span>
                </a>

                <div class="cart-overlay"></div>

                <div class="dropdown-menu mobile-cart">
                    <a href="#" title="Close (Esc)" class="btn-close">×</a>

                    <div class="dropdownmenu-wrapper custom-scrollbar">
                        <div class="dropdown-cart-header" style="margin-bottom: 0px">Giỏ Hàng</div>
                        <!-- End .dropdown-cart-header -->

                        <div class="dropdown-cart-products">
                        </div>
                        <!-- End .cart-product -->

                        <div class="dropdown-cart-total">
                            <span>TỔNG TIỀN:</span>

                            <span class="cart-total-price float-right">0 VNĐ</span>
                        </div>
                        <!-- End .dropdown-cart-total -->

                        <div class="dropdown-cart-action">
                            <a href="@Url.Action("Index", "Cart")" class="btn btn-gray btn-block view-cart">
                                Xem Giỏ Hàng
                            </a>
                            <a href="@Url.Action("Index", "CheckOut")" class="btn btn-dark btn-block">Thanh Toán</a>
                        </div>
                        <!-- End .dropdown-cart-total -->
                    </div>
                    <!-- End .dropdownmenu-wrapper -->
                </div>
                <!-- End .dropdown-menu -->
            </div>
            <!-- End .dropdown -->
        </div>
        <!-- End .header-right -->
    </div>
    <!-- End .container -->
</div>
<!-- End .header-middle -->